<html>
<head>
<title>Characters and Pinyin</title>
<link rel = "stylesheet" type = "text/css" href = "../CSS/Memory Games.css"></link>

<h1>Characters and Pinyin Memory Game</h1>

<input class="MemoryBack" onClick="window.location.href = '6) Memory Game Menu.html'" type="button" value="Back"/>

<script>

var ni = '\u4F60';
var nin = '\u60A8';
var hao = '\u597D';
var wo = '\u6211';
var hen = '\u5F88';
var ma = '\u5417';

var you = 'n'+'i\u030C';
var youP = 'n'+'\xED'+'n';
var good = 'h'+'a\u030C'+'o';
var me = 'w'+'o\u030C';
var very = 'h'+'e\u030C'+'n';
var inter = 'ma';
	
var charList = [you, ni, youP, nin, good, hao, me, wo, very, hen, inter, ma];
var numTilesSelected = [];
var memory_tile_ids = [];
var tilesFlipped = 0;
Array.prototype.memory_tile_shuffle = function() {
    var i = this.length, j, temp;
    while (--i > 0) {
        j = Math.floor(Math.random() * (i + 1));
        temp = this[j];
        this[j] = this[i];
        this[i] = temp;
    }
}
function newBoard() {
	tilesFlipped = 0;
	var tiles_generated  = '';
    charList.memory_tile_shuffle();
	for (var i = 0; i < charList.length; i++) {
		tiles_generated  += '<div id="tile_' + i + '" onclick="memoryFlipTile(this,\'' + charList[i] + '\')"></div>';
	}
	document.getElementById('memory_board').innerHTML = tiles_generated ;
}
function memoryFlipTile(tile, value) {
	if (tile.innerHTML == "" && numTilesSelected.length < 2) {
		tile.style.background = 'White';
		tile.innerHTML = value;
		if (numTilesSelected.length == 0) {
			numTilesSelected.push(value);
			memory_tile_ids.push(tile.id);
		} else if (numTilesSelected.length == 1) {
			numTilesSelected.push(value);
			memory_tile_ids.push(tile.id);
			if (numTilesSelected[0] == you && numTilesSelected[1] == ni || numTilesSelected[0] == ni && numTilesSelected[1] == you || numTilesSelected[0] == youP && numTilesSelected[1] == nin || numTilesSelected[0] == nin && numTilesSelected[1] == youP || numTilesSelected[0] == good && numTilesSelected[1] == hao || numTilesSelected[0] == hao && numTilesSelected[1] == good || numTilesSelected[0] == me && numTilesSelected[1] == wo || numTilesSelected[0] == wo && numTilesSelected[1] == me || numTilesSelected[0] == very && numTilesSelected[1] == hen || numTilesSelected[0] == hen && numTilesSelected[1] == very || numTilesSelected[0] == inter && numTilesSelected[1] == ma || numTilesSelected[0] == ma && numTilesSelected[1] == inter) {
				tilesFlipped += 2;
				numTilesSelected = [];
            	memory_tile_ids = [];
				if (tilesFlipped == charList.length) {
					alert("Board cleared... generating new board");
					document.getElementById('memory_board').innerHTML = "";
					newBoard();
				}
			} else {
				function flip_Tiles_Back() {
				    var tile_1 = document.getElementById(memory_tile_ids[0]);
				    var tile_2 = document.getElementById(memory_tile_ids[1]);
            	    tile_1.innerHTML = "";
            	    tile_2.innerHTML = "";
				    numTilesSelected = [];
            	    memory_tile_ids = [];
				}
				setTimeout(flip_Tiles_Back, 700);
			}
		}
	}
}
</script>
</head>
<body>
<div id="memory_board"></div>
<script>newBoard();</script>
</body>
</html>